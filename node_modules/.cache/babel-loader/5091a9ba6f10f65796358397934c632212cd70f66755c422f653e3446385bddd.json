{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport router from '../router';\nimport { APIService } from '../http/APIService';\nconst apiService = new APIService();\nexport default {\n  name: \"BookBuddyList\",\n  data: () => ({\n    bookbuddys: [],\n    validUserName: \"Guest\",\n    bookbuddySize: 0,\n    showMsg: '',\n    isMobile: false,\n    authenticated: false,\n    is_superuser: false,\n    books: [],\n    headers: [{\n      text: 'Book',\n      sortable: false,\n      align: 'left'\n    }, {\n      text: 'Favorited',\n      sortable: false,\n      align: 'left'\n    }, {\n      text: 'Read',\n      sortable: false,\n      align: 'left'\n    }, {\n      text: 'Read Later',\n      sortable: false,\n      align: 'left'\n    }, {\n      text: 'Currently Reading',\n      sortable: false,\n      align: 'left'\n    }, {\n      text: 'Current Page',\n      sortable: false,\n      align: 'left'\n    }, {\n      text: 'Last Read',\n      sortable: false,\n      align: 'left'\n    }, {\n      text: 'Update',\n      sortable: false,\n      align: 'left'\n    }, {\n      text: 'Delete',\n      sortable: false,\n      align: 'left'\n    }]\n  }),\n  mounted() {\n    this.authenticated = localStorage.getItem(\"isAuthenticated\");\n    this.is_superuser = localStorage.getItem(\"is_superuser\");\n    this.validUserName = localStorage.getItem(\"username\");\n    this.userID = Number(localStorage.getItem(\"userID\"));\n    this.getBookBuddy();\n    this.getBookList();\n    this.showMessages();\n  },\n  methods: {\n    onResize() {\n      if (window.innerWidth > 600) this.isMobile = false;else this.isMobile = true;\n    },\n    showMessages() {\n      if (this.$route.params.msg) {\n        this.showMsg = this.$route.params.msg;\n      }\n    },\n    getBookBuddy() {\n      apiService.getBookBuddyList().then(response => {\n        this.bookbuddys = JSON.parse(JSON.stringify(response.data.data));\n        if (localStorage.getItem(\"isAuthenticated\") && JSON.parse(localStorage.getItem(\"isAuthenticated\")) === true) {\n          this.validUserName = localStorage.getItem(\"username\");\n        }\n      }).catch(error => {\n        if (error.response.status === 401) {\n          localStorage.clear();\n          router.push(\"/auth\");\n        }\n      });\n    },\n    getBookList() {\n      apiService.getBookList().then(response => {\n        this.books = JSON.parse(JSON.stringify(response.data.data));\n        if (localStorage.getItem(\"isAuthenticated\") && JSON.parse(localStorage.getItem(\"isAuthenticated\")) === true) {\n          this.validUserName = JSON.parse(localStorage.getItem(\"log_user\"));\n        }\n      }).catch(error => {\n        if (error.response.status === 401) {\n          localStorage.clear();\n          router.push(\"/auth\");\n        }\n      });\n    },\n    addNewBookBuddy() {\n      if (localStorage.getItem(\"isAuthenticated\") && JSON.parse(localStorage.getItem(\"isAuthenticated\")) === true) {\n        router.push('/bookbuddy-create');\n      } else {\n        router.push(\"/auth\");\n      }\n    },\n    updateBookBuddy(bookbuddy) {\n      router.push('/bookbuddy-create/' + bookbuddy.pk);\n    },\n    deleteBookBuddy(bookbuddy) {\n      if (confirm(\"Do you really want to delete?\")) {\n        apiService.deleteBookBuddy(bookbuddy.pk).then(response => {\n          if (response.status === 204) {\n            router.push('/bookbuddy-list/deleted/');\n            this.getBookBuddy();\n          }\n        }).catch(error => {\n          if (error.response.status === 401) {\n            localStorage.clear();\n            router.push(\"/auth\");\n          }\n        });\n      }\n    }\n  }\n};","map":{"version":3,"names":["router","APIService","apiService","name","data","bookbuddys","validUserName","bookbuddySize","showMsg","isMobile","authenticated","is_superuser","books","headers","text","sortable","align","mounted","localStorage","getItem","userID","Number","getBookBuddy","getBookList","showMessages","methods","onResize","window","innerWidth","$route","params","msg","getBookBuddyList","then","response","JSON","parse","stringify","catch","error","status","clear","push","addNewBookBuddy","updateBookBuddy","bookbuddy","pk","deleteBookBuddy","confirm"],"sources":["/Users/tbonebrake/Documents/GitHub/Front-end-BookBuddy-Group1-ISQA4900/src/components/BookBuddyList.vue"],"sourcesContent":["<template>\n    <div class=\"container-fluid\">\n        <div class=\"row align-items-center justify-content-center\">\n            <div class=\"col col-12 align-items-center justify-content-center\">\n                <blockquote>\n                    Welcome {{ validUserName }}!\n                    <footer>\n                    </footer>\n                </blockquote>\n            </div>\n            <div class=\"col-12 col-md-10 col-lg-10 col-12 align-items-center justify-content-center\">\n                <div class=\"alert alert-success\"\n                     v-if=\"showMsg === 'new'\"\n                     :value=\"true\">\n                    New BookBuddy created.\n                </div>\n                <div class=\"alert alert-success\"\n                     v-if=\"showMsg === 'update'\"\n                     :value=\"true\">\n                    BookBuddy updated.\n                </div>\n                <div class=\"alert alert-success\"\n                     v-if=\"showMsg === 'deleted'\"\n                     :value=\"true\">\n                    BookBuddy has been deleted.\n                </div>\n            </div>\n        </div>\n        <!--Mobile device view-->\n        <div class=\"d-md-none\" id=\"collapsable-card\" style=\"width: 80%\">\n            <button type=\"button\" class=\"btn btn-primary\" @click=\"addNewBookBuddy\">\n                <font-awesome-icon icon=\"plus\"/>\n            </button>\n            <div class=\"card\" v-for=\"bookbuddy in bookbuddys\" v-bind:key=\"bookbuddy\">\n                <div class=\"card-header\" :id=\"'heading' + bookbuddy.pk\">\n                    <button class=\"btn btn-link collapsed\" data-bs-toggle=\"collapse\"\n                            :data-bs-target=\"'#collapse' + bookbuddy.pk\" aria-expanded=\"true\"\n                            :aria-controls=\"'collapse' + bookbuddy.pk\">\n                        <h6 style=\"color: #0275d8; float: left\">{{ bookbuddy.book }}</h6> <!-- Need to import book (potentially user model) at bottom for book title-->\n                    </button>\n                </div>\n\n                <div :id=\"'collapse' + bookbuddy.pk\" class=\"collapse\" :aria-labelledby=\"'heading' + bookbuddy.pk\"\n                     data-bs-parent=\"#collapsable-card\">\n                    <div class=\"card-body\">\n                        <p><b>Book:</b> {{ books[bookbuddy.book - 1].title }}</p>\n                        <p><b>Favorited:</b> {{ bookbuddy.fav_status }}</p>\n                        <p><b>Read:</b>{{ bookbuddy.read_status }}</p>\n                        <p><b>Read Later:</b> {{ bookbuddy.read_later_status }}</p>\n                        <p><b>Currently Reading:</b> {{ bookbuddy.currently_reading }}</p>\n                        <p><b>Current Page:</b> {{ bookbuddy.current_page  }}</p>\n                        <p><b>Last Read:</b> {{ bookbuddy.last_read }}</p>\n                        <div v-if=\"(this.userID === bookbuddy.user || this.is_superuser === 'true')\" class=\"btn-group\">\n                            <button @click=\"updateBookBuddy(bookbuddy)\"\n                                    style=\"background-color: transparent; padding: 5;\">\n                                <font-awesome-icon icon=\"pencil\"/>\n                            </button>\n                            <button @click=\"deleteBookBuddy(bookbuddy)\"\n                                    style=\"background-color: transparent; padding: 5;\">\n                                <font-awesome-icon icon=\"trash\"/>\n                            </button>\n                        </div>\n                        <div v-else class=\"btn-group\">\n                            <button style=\"background-color: transparent; padding: 0;\" disabled>\n                                <font-awesome-icon icon=\"pencil\"/>\n                            </button>\n                            <button style=\"background-color: transparent; padding: 0;\" disabled>\n                                <font-awesome-icon icon=\"trash\"/>\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <!--non-Mobile device view-->\n        <div class=\"col col-12 col-md-10 d-none d-xl-block d-lg-block d-md-block\">\n            <table class=\"table table-hover\" style=\"overflow-y: auto\"\n                   :headers=\"headers\">\n                <thead>\n                <tr>\n                    <th scope=\"col\">Book</th>\n                    <th scope=\"col\">Favorited</th>\n                    <th scope=\"col\">Read</th>\n                    <th scope=\"col\">Read Later</th>\n                    <th scope=\"col\">Currently Reading</th>\n                    <th scope=\"col\">Current Page</th>\n                    <th scope=\"col\">Last Read</th>\n                    <th scope=\"col\">Update</th>\n                    <th scope=\"col\">Delete</th>\n                </tr>\n                </thead>\n                <tbody>\n                <tr v-for=\"bookbuddy in bookbuddys\" v-bind:key=\"bookbuddy\"> \n                    <!--<th scope=\"row\">{{ bookbuddy.user }}</th>-->\n                    <td> {{ books[bookbuddy.book - 1].title }} </td>\n                    <td>{{ bookbuddy.fav_status }}</td>\n                    <td>{{ bookbuddy.read_status }}</td>\n                    <td>{{ bookbuddy.read_later_status }}</td>\n                    <td>{{ bookbuddy.currently_reading }}</td>\n                    <td>{{ bookbuddy.current_page }}</td>\n                    <td>{{ bookbuddy.last_read }}</td>\n                    <td v-if=\"(this.userID === bookbuddy.user || this.is_superuser === 'true')\" @click=\"updateBookBuddy(bookbuddy)\">\n                        <button style=\"background-color: transparent; padding: 0;\">\n                            <font-awesome-icon icon=\"pencil\"/>\n                        </button>\n                    </td>\n                    <td v-else>\n                        <button style=\"background-color: transparent; padding: 0;\" disabled>\n                            <font-awesome-icon icon=\"pencil\"/>\n                        </button>\n                    </td>\n                    <td v-if=\"(this.userID === bookbuddy.user || this.is_superuser === 'true')\"\n                        @click=\"deleteBookBuddy(bookbuddy)\">\n                        <button style=\"background-color: transparent; padding: 5;\">\n                            <font-awesome-icon icon=\"trash\"/>\n                        </button>\n                    </td>\n                    <td v-else>\n                        <button style=\"background-color: transparent; padding: 5;\" disabled>\n                            <font-awesome-icon icon=\"trash\"/>\n                        </button>\n                    </td>\n                </tr>\n                </tbody>\n            </table>\n            \n            <div v-if=\"this.authenticated === 'true'\">\n                <button type=\"button\" class=\"btn btn-primary\" @click=\"addNewBookBuddy\">Create BookBuddy</button>\n            </div>\n        </div>\n    </div>\n</template>\n<script>\n    import router from '../router';\n    import {APIService} from '../http/APIService';\n    const apiService = new APIService();\n\n    export default {\n        name: \"BookBuddyList\",\n        data: () => ({\n            bookbuddys: [],\n            validUserName: \"Guest\",\n            bookbuddySize: 0,\n            showMsg: '',\n            isMobile: false,\n            authenticated: false,\n            is_superuser: false,\n            books: [],\n            headers: [\n                {text: 'Book', sortable: false, align: 'left',},\n                {text: 'Favorited', sortable: false, align: 'left',},\n                {text: 'Read', sortable: false, align: 'left',},\n                {text: 'Read Later', sortable: false, align: 'left',},\n                {text: 'Currently Reading', sortable: false, align: 'left',},\n                {text: 'Current Page', sortable: false, align: 'left',},\n                {text: 'Last Read', sortable: false, align: 'left',},\n                {text: 'Update', sortable: false, align: 'left',},\n                {text: 'Delete', sortable: false, align: 'left',}\n            ],\n        }),\n\n        mounted() {\n            this.authenticated = localStorage.getItem(\"isAuthenticated\")\n            this.is_superuser = localStorage.getItem(\"is_superuser\");\n            this.validUserName = localStorage.getItem(\"username\");\n            this.userID = Number(localStorage.getItem(\"userID\"));\n            this.getBookBuddy();\n            this.getBookList();\n            this.showMessages();\n        },\n        methods: {\n            onResize() {\n                if (window.innerWidth > 600)\n                    this.isMobile = false;\n                else\n                    this.isMobile = true;\n            },\n            showMessages() {\n                if (this.$route.params.msg) {\n                    this.showMsg = this.$route.params.msg;\n                }\n            },\n            getBookBuddy() {\n                apiService.getBookBuddyList().then(response => {\n                    this.bookbuddys = JSON.parse(JSON.stringify(response.data.data));\n                    if (localStorage.getItem(\"isAuthenticated\")\n                        && JSON.parse(localStorage.getItem(\"isAuthenticated\")) === true) {\n                        this.validUserName = localStorage.getItem(\"username\");\n                    }\n                }).catch(error => {\n                    if (error.response.status === 401) {\n                        localStorage.clear();\n                        router.push(\"/auth\");\n                    }\n                });\n            },\n            getBookList() {\n                apiService.getBookList().then(response => {\n                    this.books = JSON.parse(JSON.stringify(response.data.data));\n                    if (localStorage.getItem(\"isAuthenticated\")\n                        && JSON.parse(localStorage.getItem(\"isAuthenticated\")) === true) {\n                        this.validUserName = JSON.parse(localStorage.getItem(\"log_user\"));\n                    }\n                }).catch(error =>{\n                    if (error.response.status === 401) {\n                        localStorage.clear();\n                        router.push(\"/auth\");\n                    }\n                });\n\n            },\n            addNewBookBuddy() {\n                if (localStorage.getItem(\"isAuthenticated\")\n                    && JSON.parse(localStorage.getItem(\"isAuthenticated\")) === true) {\n                    router.push('/bookbuddy-create');\n                } else {\n                    router.push(\"/auth\");\n                }\n            },\n            updateBookBuddy(bookbuddy) {\n                router.push('/bookbuddy-create/' + bookbuddy.pk);\n            },\n            deleteBookBuddy(bookbuddy) {\n                if (confirm(\"Do you really want to delete?\")) {\n                    apiService.deleteBookBuddy(bookbuddy.pk).then(response => {\n                        if (response.status === 204) {\n                            router.push('/bookbuddy-list/deleted/')\n                            this.getBookBuddy()\n                        }\n                    }).catch(error => {\n                        if (error.response.status === 401) {\n                            localStorage.clear();\n                            router.push(\"/auth\");\n                        }\n                    });\n                }\n            }\n        }\n    };\n</script>\n<style>\n    button {\n        padding: 1rem;\n        border: 0;\n        cursor: pointer;\n    }\n</style>\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport router from '../router';\nimport { APIService } from '../http/APIService';\nconst apiService = new APIService();\nexport default {\n  name: 'BookBuddyCreate',\n  components: {},\n  //prevent user from accessing this page if not authorized\n  beforeCreate() {\n    if (localStorage.getItem(\"isAuthenticated\") && JSON.parse(localStorage.getItem(\"isAuthenticated\")) === true) {\n      this.authenticated = true;\n    } else {\n      this.authenticated = false;\n    }\n    if (this.authenticated === false) {\n      router.push(\"/auth\");\n    }\n  },\n  data() {\n    return {\n      showError: false,\n      bookbuddy: {},\n      books: [],\n      pageTitle: \"Create a BookBuddy\",\n      isUpdate: false,\n      showMsg: '',\n      authenticated: false\n    };\n  },\n  methods: {\n    fetchBooks() {\n      apiService.getBookList().then(response => {\n        this.books = response.data.data;\n        console.log('Books loaded:', this.books);\n      }).catch(error => {\n        console.error(\"Failed to fetch books:\", error);\n        this.showMsg = \"Failed to load books\";\n      });\n    },\n    createBookBuddy() {\n      apiService.addNewBookBuddy(this.bookbuddy).then(response => {\n        if (response.status === 201) {\n          this.bookbuddy = response.data;\n          this.showMsg = \"\";\n          //await router.push('/bookbuddy-list/new');\n          (async () => await router.push('/bookbuddy-list/new'))();\n        } else {\n          this.showMsg = \"error\";\n        }\n      }).catch(error => {\n        if (error.response.status === 401) {\n          // \"not authorized\"\n          router.push(\"/auth\");\n        } else if (error.response.status === 400) {\n          //\"bad request\"\n          this.showMsg = \"requestError\";\n        } else {\n          this.showMsg = \"error\";\n        }\n      });\n    },\n    cancelOperation() {\n      router.push(\"/bookbuddy-list\");\n    },\n    updateBookBuddy() {\n      apiService.updateBookBuddy(this.bookbuddy).then(response => {\n        if (response.status === 200) {\n          this.bookbuddy = response.data;\n          router.push('/bookbuddy-list/update');\n        } else {\n          this.showMsg = \"error\";\n        }\n      }).catch(error => {\n        if (error.response.status === 401) {\n          router.push(\"/auth\");\n        } else if (error.response.status === 400) {\n          this.showMsg = \"error\";\n        }\n      });\n    }\n  },\n  mounted() {\n    this.fetchBooks();\n    if (this.$route.params.pk) {\n      this.pageTitle = \"Edit current BookBuddy\";\n      this.isUpdate = true;\n      apiService.getBookBuddy(this.$route.params.pk).then(response => {\n        this.bookbuddy = response.data;\n      }).catch(error => {\n        if (error.response.status === 401) {\n          // \"not authorized\"\n          router.push(\"/auth\");\n        } else {\n          this.showMsg = \"error\";\n          router.push(\"/auth\");\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["router","APIService","apiService","name","components","beforeCreate","localStorage","getItem","JSON","parse","authenticated","push","data","showError","bookbuddy","books","pageTitle","isUpdate","showMsg","methods","fetchBooks","getBookList","then","response","console","log","catch","error","createBookBuddy","addNewBookBuddy","status","cancelOperation","updateBookBuddy","mounted","$route","params","pk","getBookBuddy"],"sources":["/Users/tbonebrake/Documents/GitHub/Front-end-BookBuddy-Group1-ISQA4900/src/components/BookBuddyCreate.vue"],"sourcesContent":["<template>\n    <div class=\"container-fluid\">\n      <div class=\"row align-items-center justify-content-center\">\n        <div class=\" col align-items-center\">\n          <div class=\"row align-items-center justify-content-center\">\n            <div class=\"col col-12 col-sm-10 col-md-10 col-lg-6\">\n              <div class=\"alert alert-danger shadow\" role=\"alert\"\n              v-if=\"showMsg === 'error'\">\n                Please verify BookBuddy selections!\n              </div>\n            </div>\n          </div>\n          <div class=\"row align-items-center justify-content-center\">\n            <div class=\"col col-12 col-sm-10 col-md-10 col-lg-6 align-items-center\">\n              <div class=\"card\">\n                <div class=\"card-header\">{{pageTitle}}</div>\n                <div class=\"card-body\">\n                  <form ref=\"form\">\n                    <div class=\"container-fluid\">\n                      <div class=\"form-group row justify-content-around py-2\">\n                        <label class=\"col-4\">Book</label>\n                        <select v-model=\"bookbuddy.book\" class=\"form-select\">\n                            <option class =\"form-select form-select-sm \" v-for=\"book in books\" :value=\"book.pk\" :key=\"book.pk\"> {{ book.title }} </option>\n                        </select>\n                      </div>\n                      <div class=\"form-group row justify-content-around py-2\">\n                        <label class=\"col-4\">Favorite Status</label>\n                        <div class=\"col col-8\">\n                          <select v-model=\"bookbuddy.fav_status\" type=\"boolean\" class=\"form-control-sm form-control\">\n                            <option :value=true>Yes</option>\n                            <option :value=false>No</option>\n                          </select>\n                        </div>\n                      </div>          \n                      <div class=\"form-group row justify-content-around py-2\">\n                        <label class=\"col-4\">Read Status</label>\n                        <div class=\"col col-8\">\n                          <select v-model=\"bookbuddy.read_status\" type=\"boolean\" class=\"form-control-sm form-control\">\n                            <option :value=true>Yes</option>\n                            <option :value=false>No</option>\n                          </select>\n                        </div>\n                      </div>\n                      <div class=\"form-group row justify-content-around py-2\">\n                        <label class=\"col-4\">Read Later Status</label>\n                        <div class=\"col col-8\">\n                          <select v-model=\"bookbuddy.read_later_status\" type=\"boolean\" class=\"form-control-sm form-control\">\n                            <option :value=true>Yes</option>\n                            <option :value=false>No</option>\n                          </select>\n                        </div>\n                      </div>\n                      <div class=\"form-group row justify-content-around py-2\">\n                        <label class=\"col-4\">Currently Reading</label>\n                        <div class=\"col col-8\">\n                          <select v-model=\"bookbuddy.currently_reading\" type=\"boolean\" class=\"form-control-sm form-control\">\n                            <option :value=true>Yes</option>\n                            <option :value=false>No</option>\n                          </select>\n                        </div>\n                      </div>\n                      <div class=\"form-group row justify-content-around py-2\">\n                        <label class=\"col-4\">Current Page</label>\n                        <div class=\"col col-8\">\n                          <input v-model=\"bookbuddy.current_page\" type=\"number\" class=\"form-control-sm form-control\">\n                        </div>\n                      </div>\n                      <div class=\"form-group row justify-content-around py-2\">\n                        <label class=\"col-4\">Last Read</label>\n                        <div class=\"col col-8\">\n                          <input v-model=\"bookbuddy.last_read\" type=\"date\" class=\"form-control-sm form-control\">\n                        </div>\n                      </div>  \n\n                      <div class=\"form-group row justify-content-around py-2\">\n                        <label class=\"col-4\">User</label>\n                        <div class=\"col col-8\">\n                          <input v-model=\"bookbuddy.user\" type=\"text\" class=\"form-control-sm form-control\">\n                        </div>\n                      </div> \n\n                      <div class=\"row justify-content-around\">\n                        <div v-if=\"!isUpdate\" type=\"button\" class=\"btn btn-primary col-4\" @click=\"createBookBuddy\">Save</div>\n                        <div v-if=\"isUpdate\" type=\"button\" class=\"btn btn-primary col-4\" @click=\"updateBookBuddy\">Update</div>\n                        <div type=\"button\" class=\"btn btn-secondary col-4\" @click=\"cancelOperation\">Cancel</div>   \n                      </div>\n                    </div>\n                  </form>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </template>\n  <script>\n    import router from '../router';\n    import {APIService} from '../http/APIService';\n    const apiService = new APIService();\n\n    export default {\n      name: 'BookBuddyCreate',\n      components: {},\n          //prevent user from accessing this page if not authorized\n    beforeCreate() {\n    if (localStorage.getItem(\"isAuthenticated\") &&\n        JSON.parse(localStorage.getItem(\"isAuthenticated\")) === true ){\n          this.authenticated = true\n        }\n        else {\n          this.authenticated = false\n        }\n        if(this.authenticated===false){\n            router.push(\"/auth\");\n          }\n   },\n      data() {\n        return {\n          showError: false,\n          bookbuddy: {},\n          books: [],\n          pageTitle: \"Create a BookBuddy\",\n          isUpdate: false,\n          showMsg: '',\n          authenticated: false\n        };\n      },\n      methods: {\n        fetchBooks() {\n          apiService.getBookList().then(response => {\n            this.books = response.data.data;\n            console.log('Books loaded:', this.books);\n          }).catch(error => {\n            console.error(\"Failed to fetch books:\", error);\n            this.showMsg = \"Failed to load books\";\n          });\n        },\n        createBookBuddy() {\n            apiService.addNewBookBuddy(this.bookbuddy).then(response => {\n            if (response.status === 201) {\n              this.bookbuddy = response.data;\n               this.showMsg = \"\";\n              //await router.push('/bookbuddy-list/new');\n              (async () => await router.push('/bookbuddy-list/new'))();\n            }else{\n                this.showMsg = \"error\";\n            }\n          }).catch(error => {\n            if (error.response.status === 401) { // \"not authorized\"\n              router.push(\"/auth\");\n            }else if (error.response.status === 400) { //\"bad request\"\n              this.showMsg = \"requestError\";\n            }else{\n              this.showMsg = \"error\";\n            }\n          });\n        },\n        cancelOperation(){\n           router.push(\"/bookbuddy-list\");\n        },\n        updateBookBuddy() {\n          apiService.updateBookBuddy(this.bookbuddy).then(response => {\n            if (response.status === 200) {\n              this.bookbuddy = response.data;\n              router.push('/bookbuddy-list/update');\n            }else{\n                this.showMsg = \"error\";\n            }\n          }).catch(error => {\n            if (error.response.status === 401) {\n              router.push(\"/auth\");\n            }else if (error.response.status === 400) {\n              this.showMsg = \"error\";\n            }\n          });\n        }\n      },\n      mounted() {\n        this.fetchBooks();\n        if (this.$route.params.pk) {\n          this.pageTitle = \"Edit current BookBuddy\";\n          this.isUpdate = true;\n          apiService.getBookBuddy(this.$route.params.pk).then(response => {\n            this.bookbuddy = response.data;\n          }).catch(error => {\n            if (error.response.status === 401) { // \"not authorized\"\n              router.push(\"/auth\");\n            }else{\n              this.showMsg = \"error\";\n              router.push(\"/auth\");\n            }\n          });\n        }\n      },\n    }\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}